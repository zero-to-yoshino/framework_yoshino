@import helper._
@import forms.EntryForm
@(user: User, Entries: java.util.List[Entry], entryForm: Form[EntryForm])(implicit request: Http.Request, messages:
play.i18n.Messages)

@main("投稿掲示板"){
<header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
  <h1 class="d-flex align-items-center ms-3 mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">投稿掲示板</h1>
  <ul class="nav nav-pills me-3">
    <li><button class="btn btn-outline-primary ms-3" onclick="location.href='@routes.SessionController.logout()'">ログアウト</button></li>
    <li><button class="btn btn-outline-primary ms-3" onclick="location.href='@routes.UserController.editUser()'">ユーザー情報編集</button></li>
    <li><button class = "btn btn-outline-primary ms-3" onclick="location.href='@routes.HomeController.search()'">投稿検索</button></li>
  </ul>
</header>


@form(routes.HomeController.save()){
@CSRF.formField

@inputText(entryForm("name"), Symbol("required")-> "required")

@inputText(entryForm("title"), Symbol("required")-> "required")

@inputText(entryForm("message"), Symbol("required")-> "required")

<button type="submit">新規投稿</button>
}

@request.flash.asScala().data.map { case (name, value) =>
<div class="@name">@value</div>
}

@for(entry <- Entries) { <p>------------</p>
  <li>名前：@entry.getName()</li>
  <li>タイトル：@entry.getTitle()</li>
  <li>メッセージ：@entry.getMessage()</li>
  <li>投稿日時：@entry.getCreateDate()</li>
  @if(user.getHasAdmin() == true){
  <button onclick="location.href='@routes.HomeController.edit(entry.getId())'">編集へ</button>
  } else if(entry.getUser().getUserId() == user.getUserId()) {
  <button onclick="location.href='@routes.HomeController.edit(entry.getId())'">編集へ</button>
  }
  }
}